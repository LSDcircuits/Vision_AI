# --- stop any old venv ---
deactivate 2>/dev/null || true

# just for arm64 achitecture computers ---- making this easier for the future of my sanity
# --- basic tools + VS Code (arm64 .deb) ---
sudo apt update
sudo apt install -y curl wget git build-essential
wget https://update.code.visualstudio.com/latest/linux-deb-arm64/stable -O code.deb
sudo dpkg -i code.deb || sudo apt -y -f install
rm -f code.deb
# Run with sandbox disabled (works on some Pi/ARM desktops):
# code --no-sandbox &

# --- system Qt for labelImg (so we don't fight Qt inside pip) ---
sudo apt install -y python3-pyqt5 pyqt5-dev-tools qt5-image-formats-plugins python3-lxml

# --- Python + venv ---
sudo apt install -y python3 python3-pip python3-venv

# --- create project venv that can SEE system Qt packages ---
python3 -m venv $HOME/VAI2 --system-site-packages
source $HOME/VAI2/bin/activate

# --- pip + core libs (pin numpy and opencv to the combo that worked for you) ---
python -V                     # expect 3.10.x or 3.12.x
pip install --upgrade pip
pip install "numpy<2" "opencv-python==4.7.0.72" ffmpeg-python tqdm matplotlib pandas requests pyyaml rich

# --- YOLO (Ultralytics) ---
pip install ultralytics

# --- PyTorch CPU wheels (stable for ARM/CPU) ---
pip install --index-url https://download.pytorch.org/whl/cpu torch torchvision torchaudio --no-cache-dir

# --- quick smoke test ---
python - << 'PY'
import ultralytics, cv2, torch, numpy
print("ultralytics:", ultralytics.__version__)
print("cv2:", cv2.__version__)
print("torch:", torch.__version__)
print("numpy:", numpy.__version__)
PY
